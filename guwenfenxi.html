<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>文言知识简拆</title>

<style type="text/css">
table, td{
    border: solid 1px lightgray;
    border-collapse: collapse;
}
</style>
<script type="text/javascript" src="../js/jquery-2.1.4.min.js"></script>


<script>
// 通假字快查
var lsTongJia = "不->否|世->逝|中->衷|为->谓|乡->向|于->吁|于->於|亡->无|从->纵|以->已|伏->服|信->伸|俨->严|倍->背|僇->戮|儋石->擔石|光->廣|免->娩|共->供|具->俱|内->纳|冥->溟|冯->凭|决->块|凶->兇|函胡->含糊|刑->型|剔->剃|匪->非|却->恰|厌->餍|厭->饜|厲->勵|县->悬|反->返|反->返|取->娶|受->授|句->勾|咨->諮|唱->倡|善->拭|嚮->向|嚮->響|圜->圆|坐->座|垂->陲|塗->途|失->佚|夷->怡|奉->捧|女->汝|媿->愧|孫->遜|孰->熟|孰->熟|尊->樽|尔->耳|屈->缺|属->嘱|已->以|已->矣|帅->率|希->稀|帖->贴|帘->奁|干->岸|底->抵|庭->廷|强->僵|彊->強|归->馈|当->倘|录->碌|得->德|忖->揣|志->誌|惠->慧|懽->歡|指->旨|指撝->指揮|振->震|摩->磨|摩厉->磨砺|攀->扳|支->肢|政->征|敛->殓|施->迤|族->眾|无->毋|景->影|暴->曝|曷->何|曾->层|有->又|机->几|板->版|枪->抢|案->按|止->只|每->们|没->冒|沽->酤|泮->畔|洼->窪|涂->途|濯->浊|灌->盥|火->伙|炎->焰|熙->嬉|父->甫|狡->娇|生->性|田->畋|由->犹|畔->叛|盖->盍|盤桓->徘徊|直->值|知->智|祗->只|离->罹|突->涂|简->拣|簡->揀|纫->韧|纽->扭|绰->戳|缪->穆|缾->瓶|罔->网|羞->馐|翼->翌|耆->嗜|而->尔|而->耐|耶->爷|耶孃->爺娘|肴->餚|與->歟|舍->捨|莫->暮|華->花|蓋->盍|蓐->褥|蚤->早|衡->横|被->披|裁->才|要->邀|见->现|詰詘->佶屈|詳->佯|說->悅|誼->義|譆->嘻|讎->仇|识->志|诎->屈|说->悦|说->脱|賓->儐|質->鑕|负->伏|责->债|质->贽|赀->资|趣->趋|趣->趨|距->拒|转->啭|辟->避|辩->辨|辩->变|辩->辨|还->旋|还->环|逝->誓|道->导|遙->搖|遯->遁|那->哪|邪->耶|邱->丘|郤->隙|采->彩|销->消|错->措|閒->間|闕->缺|闵->悯|阁->搁|阖->合|阙->缺|阳->佯|陇->垄|陵->凌|零丁->伶仃|顥->浩|颁->斑|颺->揚|食->饲|飨->享|驩->歡|齐->剂"

var lsXuCi = "与->|且->|为->|乃->|之->|乎->|也->|于->|以->|何->|其->|则->|即->|因->|所->|既->|焉->|然->|盖->|矣->|者->|而->|若->|莫->|虽->"
var lsShiCi = "爱->|安->|伯->|被->|倍->|本->|鄙->|兵->|病->|察->|长->|朝->|池->|曾->|乘->|城->|诚->|除->|传->|辞->|从->|达->|殆->|迨->|当->|道->|得->|度->|短->|多->|发->|方->|非->|复->|负->|盖->|鼓->|故->|顾->|固->|归->|国->|过->|何->|恨->|后->|胡->|患->|或->|疾->|及->|即->|既->|假->|间->|见->|解->|进->|尽->|就->|举->|绝->|堪->|克->|类->|怜->|临->|弥->|名->|末->|莫->|乃->|内->|判->|期->|奇->|迁->|请->|穷->|求->|去->|劝->|却->|如->|若->|善->|稍->|少->|涉->|胜->|识->|使->|是->|适->|书->|孰->|属->|数->|遂->|率->|说->|私->|素->|汤->|涕->|通->|徒->|图->|退->|亡->|王->|望->|恶->|微->|闻->|相->|谢->|悉->|信->|兴->|行->|幸->|修->|徐->|许->|阳->|要->|宜->|遗->|贻->|易->|阴->|引->|右->|逾->|狱->|再->|造->|知->|置->|致->|质->|治->|诸->|贼->|族->|卒->|走->|左->|坐->"
lsShiCi += "|东->|云->|何->|公->|军->|左->|当->|是->|歌->|独->|王->|行->|身->|身->|面->"

var lsGuJinYiYi = "一切->古义：一律、一概、任何。今义：所有的|不用->古义：不愿作。今义：没有必要|不过->古义：不超过。今义：转折连词，|个->古义：这样。今义：量词|中国->古义：中原地区。今义：中华人民共和国|买舟->古义：雇船。今义：买船|于是->古义：在这时。今义：因此|交通->古义：交错相通。今义：主要用于称各种运输和邮电事业|亲戚->古义：指父母兄弟，统指家里亲人。今义：旁系亲属|从来->古义：从哪里来。今义：从过去到现在|会->古义：适逢，正赶上。今义：会见|但->古义：只，只不过。只有，只要。今义：转折连词|何苦->古义：怕什么。今义：不值得做|兵->古义：兵器。今义：士兵|其实->古义：①它的果实。②那实际情况。今义：实际上（副词）|再->古义：第二次。今义：又一次|几何->古义：多少。今义：数学中的一门学科|初一->古义：刚刚开始。今义：农历每月的第一天|前进->古义：前，走上前去；走，奉献。今义：向前行进，思想进步|前途->古义：前面的路。今义：将来的光景|加->古义：虚夸，以少报多。今义：增加|卑鄙->古义：地位低微，见识浅陋。今义：言行恶劣|即使->古义：即，就，让，叫。今义：表假设性让步连词|去->古义：离开。今义：到……去|可以->古义：可以凭借。今义：对某事表赞同|可怜->古义：可惜，可叹。今义：值得怜悯|可惜->古义：值得珍惜。今义：值得惋惜|地方->古义：①当地的事。②土地方圆。③大地的形状是方的。今义：①泛指空间的一部分。②民间。③地区。|大风->古义：麻疯病。今义：大的风|奇巧->古义：特别手巧。今义：新奇而巧妙|如此->古义：像这样。今义：这样|妻子->古义：妻子和儿女。今义：专指男子的女性配偶|学者->古义：两个词，求学的人。今义：指在学术上有一定成就的人|居->古义：停留、过了。今义：居住、住所|左右->古义：侍卫人员。今义：①大致范围（方位词）。 ②控制（动词）。|市->古义：买、卖、集市 今义：城市|布衣->古义：平民。今义：棉布衣服|常->古义：经常。今义：平常，一般|床->古义：坐具。今义：卧具|开张->古义：扩大。今义：开业（多指商业部门）|弟兄->古义：有时单指兄。今义：①同辈之间。 ②旧时军队称士兵。|感激->古义：感，感动；激，奋激。今义：深深的感谢|户->古义：窗户。今义：门|所以->古义：①缘故（名词）②表原因的虚词。③用来，靠它来。今义：表示因果关系的关联词|扶->古义：沿着，顺着。今义：扶持|扶老->古义：。今义：扶着老人|捐->古义：丢弃。今义：献出|故事->古义：先例、旧事。今义：真实的或虚构的有人物有情节的事情|文理->古义：文采和道理。今义：文章内容方面和词句方面的条理|无日->古义：不久。今义：不知还有多少时候，很久|无论->古义：不要说，更不必说。今义：连词，表无条件关系|明星->古义：明亮的星光。今义：指行业中做出成绩，出了名的人。|春秋->古义：年龄，一年。今义：春季、秋季|有意->古义：①愿意。②有某种打算。今义：故意，居心|毒->古义：怨恨。今义：毒害，有毒的物质或事物|气候->古义：指天气（雨雪阴睛）的意思；今义：指一个地区的气象概况|池->古义：护城河。今义：小水塘、池塘|汤->古义：热水。今义：菜或面做的稀状食物|涕->古义：眼泪。今义：鼻涕|烈士->古义：有雄心壮志的人。今义：为正义事业而献身的人|然后->古义：这样以后。今义：副词，表接着某种动作或情况之后|然而->古义：两个词。“然”代指上文所说的情况，“而”表示转折，等于说“如此（这样），可是……”。今义：是一个表示转折的连词|特->古义：只不过。今义：特殊，超出一般|牺牲->古义：祭祀用的猪、牛、羊等。今义：为正义而献出生命|狱->古义：案件。今义：监犯人的地方（监狱）|用心->古义：思想意识的活动（中性）。今义：读书用功或对事肯动脑筋（褒义）|病->古义：困苦不堪。今义：疾病|痛恨->古义：痛心、遗憾。今义：无比憎恨|直走->古义：趋向。今义：行走|稍稍->古义：渐渐地、慢慢地。今义：稍微|穷->古义：极，尽。今义：资财缺乏(古时用“贫”)|精英->古义：指金玉珠宝等物。今义：指优秀人才。|经营->古义：指金玉珠宝等物。今义：指筹划管理或组织(企业、活动)。|结束->古义：整装。今义：事情做完一个过程的完结。|绝境->古义：与世隔绝的地方。今义：无出路的境地|美人->古义：歌伎、宫妃。今义：美貌女子|股->古义：大腿。今义：屁股|至于->古义：终于达到某种程度。今义：表示另提一事的连词|致意->古义：抒发心情。如：其存君兴国而欲反复之，一篇之中，三致意焉。 （《屈原列传》）。今义：表示问候|致词->古义：对……说话。今义：指在举行某种仪式时说勉励、感谢、祝贺、悼念等的话|若->古义：你。今义：像|落->古义：座，所；今义：下降，衰败|虽然->古义：两个词，“虽”即“虽然”，“然”即“如此”“这样”。今义：一个词|行为->古义：行，品行；为，做。今义：举动|裙->古义：衣服。今义：裙子|规->古义：计划。今义：规则，成例|走->古义：“跑”的意思。今义：行走|越->古义：及，到。今义：过了|鄙->古义：浅陋。今义：粗俗，低下|钩心斗角->古义：指宫室结构的参差错落，精巧工致。今义：比喻用尽心机，明争暗斗。|陇断->古义：山岗高地。今义：把持和独占。[注：陇同垄]|隔离->古义：遮断，遮蔽。今义：不让聚在一起，避免接触|非常->古义：意外事故（名词）。今义：很、大（副词）|鞠躬->古义：①弯着身子。②恭敬地、谨慎地。今义：行礼。|鲜美->古义：鲜艳美丽。今义：食物新鲜，味道好"

function unique(array){
    var n = [];//临时数组
    for(var i = 0;i < array.length; i++){
        if(n.indexOf(array[i]) == -1) n.push(array[i]);
    }
    return n;
}

var lsTongJia = unique(lsTongJia.split("|")).map(function(v){return v.split("->")})
var lsXuCi =    unique(lsXuCi.split("|")).map(function(v){return v.split("->")})
var lsShiCi =   unique(lsShiCi.split("|")).map(function(v){return v.split("->")})
var lsGuJinYiYi =   unique(lsGuJinYiYi.split("|")).map(function(v){return v.split("->")})

getSentence = function(txt, pos){
    lsBiaoDian = ["，","。","；","？","“","”"]
    posL = Math.max.apply(null, [0].concat(lsBiaoDian.map(function(v){return txt.lastIndexOf(v, pos)}).filter(function(v){return v!=-1})))
    posR = Math.min.apply(null, [txt.length].concat(lsBiaoDian.map(function(v){return txt.indexOf(v, pos)}).filter(function(v){return v!=-1})))
    console.log(posL, posR)
    return txt.substr(posL+1, posR - posL-1)
}
getWord = function(txt, pos){
    lsBiaoDian = [" "]
    lsBiaoDian = ["，","。","；","？","“","”"]
    posL = Math.max.apply(null, [0].concat(lsBiaoDian.map(function(v){return txt.lastIndexOf(v, pos)}).filter(function(v){return v!=-1})))
    posR = Math.min.apply(null, [txt.length].concat(lsBiaoDian.map(function(v){return txt.indexOf(v, pos)}).filter(function(v){return v!=-1})))
    console.log(posL, posR)
    return txt.substr(posL+1, posR - posL-1)
}
tbodyMatches = function(text, ls){
    var lsHtml = []
    ls.forEach(function(v){
        var pos = text.indexOf(v[0], 0)
        var lspos = []
        while(pos != -1){
            lspos[lspos.length] = pos
            pos = text.indexOf(v[0], pos + 1)
        }
        // if(lspos.length){
        //     lsHtml[lsHtml.length] = ""
        //         +"<tr>"
        //         +'<td rowspan="'+lspos.length+'">'+v[0]+"</td>"
        //         +'<td rowspan="'+lspos.length+'">'+v[1]+"</td>"
        //         +"<td>"+getSentence(text, lspos.shift())+"</td>"
        //         +"</tr>"
            
        //     lspos.forEach(function(v){
        //         lsHtml[lsHtml.length] = ""
        //             +"<tr>"
        //                 +"<td>"+getSentence(text, v)+"</td>"
        //             +"</tr>"
        //     })
        // }

        lspos.forEach(function(pos){
            lsHtml[lsHtml.length] = ""
                +"<tr>"
                    +'<td>'+v[0]+"</td>"
                    +'<td>'+v[1]+"</td>"
                    +"<td>"+getWord(text, pos)+"</td>"
                    +"<td>"+getSentence(text, pos)+"</td>"
                +"</tr>"
        })
    })
    return lsHtml.join("")
}
analyze = function(obj){
    document.getElementById("tongjiazi").innerHTML = tbodyMatches(obj.value, lsTongJia)
    document.getElementById("xuci").innerHTML = tbodyMatches(obj.value, lsXuCi)
    document.getElementById("shici").innerHTML = tbodyMatches(obj.value, lsShiCi)
    document.getElementById("gujinyiyi").innerHTML = tbodyMatches(obj.value, lsGuJinYiYi)
}
</script>
<style type="text/css">
    .highlight { background-color: yellow }
</style>
</head>
<body>

<div id='waiDiv'>
    <textarea id='text' onchange='analyze(this)'>
    
    </textarea>
    <span style="display:none">
        <h3>通假字列表</h3>
        <table id='tongjiazi'>

        </table>
    </span>
    <span style="display:none">
        <h3>虚词列表</h3>
        <table id='xuci'>

        </table>
    </span>

    <span>
        <h3>实词列表</h3>
        <table id='shici'>

        </table>
    </span>

    <span>
        <h3>古今异义列表</h3>
        <table id='gujinyiyi'>

        </table>
    </span>
</div>

</body>
</html>
